<!DOCTYPE html>
<html lang="zh">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <title>{% block title %}首页 - ZZU康途智选{% endblock %}</title>
    <link rel="icon" href="favicon.ico" type="image/ico">
    <meta name="keywords" content="医疗推荐,知识图谱,智能问答">
    <meta name="description" content="ZZU康途智选医疗推荐知识中枢">
    <meta name="author" content="ZZU-CAI-12">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="/static/css/style.min.css" rel="stylesheet">

    <style>
    /* 全局样式优化 */
    html, body {
        height: 100%;
        overflow: hidden;
        font-family: 'Helvetica Neue', Arial, 'PingFang SC', 'Microsoft YaHei', sans-serif;
    }

    /* 布局结构 */
    .lyear-layout-web {
        height: 100%;
        position: relative;
        background-color: #f5f7fa;
    }

    .lyear-layout-header {
        height: 60px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: #fff;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        display: flex;
        align-items: center;
    }

    .lyear-layout-sidebar {
        top: 60px !important;
        height: calc(100% - 60px) !important;
        position: fixed;
        left: 0;
        bottom: 0;
        width: 240px;
        background: #2b303b;
        transition: all 0.3s ease;
        z-index: 900;
    }

    .lyear-layout-container {
        margin-top: 60px;
        margin-left: 240px;
        height: calc(100vh - 60px);
        overflow-y: auto;
        padding: 20px;
        transition: margin-left 0.3s ease;
    }

    /* 导航菜单样式 */
    .nav-drawer {
        padding: 15px 0;
    }

    .nav-item {
        margin: 5px 10px;
    }

    .nav-item a {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        transition: all 0.3s ease;
        border-radius: 6px;
        color: #a7b1c2;
        text-decoration: none;
    }

    .nav-item a:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #fff;
    }

    .nav-item a.active {
        background-color: #2196F3;
        color: #fff;
        box-shadow: 0 4px 12px -2px rgba(33, 150, 243, 0.3);
    }

    .nav-item i {
        margin-right: 10px;
        font-size: 20px;
    }

    /* 顶部导航栏 */
    .navbar-default {
        background: transparent;
        border: none;
        padding: 0 20px;
        width: 100%;
    }

    .navbar-page-title {
        font-size: 18px;
        font-weight: 500;
        color: #333;
        margin-left: 20px;
    }

    /* 侧边栏底部版权信息 */
    .sidebar-footer {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 15px;
        background: rgba(0, 0, 0, 0.1);
        color: #a7b1c2;
        font-size: 12px;
        text-align: center;
    }

    /* 响应式调整 */
    @media (max-width: 768px) {
        .lyear-layout-sidebar {
            transform: translateX(-100%);
        }
        .lyear-layout-container {
            margin-left: 0;
        }
        .sidebar-open .lyear-layout-sidebar {
            transform: translateX(0);
        }
        .sidebar-open .lyear-layout-container {
            margin-left: 240px;
        }
    }

    /* 内容卡片样式 */
    .card {
        border: none;
        border-radius: 8px;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 20px;
        background: #fff;
    }

    .card-header {
        background: transparent;
        border-bottom: 1px solid #eee;
        padding: 15px 20px;
        font-size: 16px;
        font-weight: 500;
    }

    .card-body {
        padding: 20px;
    }
    </style>
</head>

<body>
<div class="lyear-layout-web">
    <!-- 左侧导航 -->
    <aside class="lyear-layout-sidebar">
        <div class="lyear-layout-sidebar-scroll">
            <nav class="sidebar-main">
                <ul class="nav nav-drawer">
                    <li class="nav-item">
                        <a href="/" class="{% if request.path == '/' %}active{% endif %}">
                            <i class="mdi mdi-home"></i> 首页
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/about" class="{% if request.path == '/about' %}active{% endif %}">
                            <i class="mdi mdi-information-outline"></i> 关于我们
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/wenda" class="{% if request.path == '/wenda' %}active{% endif %}">
                            <i class="mdi mdi-format-align-justify"></i> 智能问答
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/forum" class="{% if request.path == '/forum' %}active{% endif %}">
                            <i class="mdi mdi-forum"></i> 医疗论坛
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/health-assessment" class="{% if request.path == '/health-assessment' %}active{% endif %}">
                            <i class="mdi mdi-heart-pulse"></i> 健康测评
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <p class="copyright">Copyright &copy; 2025<br>ZZU康途智选医疗推荐知识中枢</p>
            </div>
        </div>
    </aside>

    <!-- 头部导航栏 -->
    <header class="lyear-layout-header">
        <nav class="navbar navbar-default">
            <div class="topbar">
                <div class="lyear-aside-toggler">
                    <span class="lyear-toggler-bar"></span>
                    <span class="lyear-toggler-bar"></span>
                    <span class="lyear-toggler-bar"></span>
                </div>
                <span class="navbar-page-title">{% block page_title %}医疗药品服务智能推荐系统{% endblock %}</span>
                <ul class="topbar-right">
                    <li class="dropdown dropdown-profile">
                        <a href="/accounts/logout">
                            <i class="mdi mdi-logout"></i> 退出
                        </a>
                    </li>
                    <li class="dropdown dropdown-profile">
                        <a href="javascript:void(0)" data-toggle="dropdown" aria-expanded="false">
                            <i class="mdi mdi-account-circle"></i> {{ request.user }}
                            <i class="mdi mdi-chevron-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li><a href="{% url 'myneo4j:user_posts' request.user.id %}"><i class="mdi mdi-format-list-bulleted"></i> 我的发帖</a></li>
                            <li><a href="{% url 'myneo4j:user_replies' request.user.id %}"><i class="mdi mdi-comment-multiple-outline"></i> 我的回复</a></li>
                            <li class="divider"></li>
                            <li><a href="/accounts/profile/"><i class="mdi mdi-account-edit"></i> 个人资料</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- 页面主要内容 -->
    <main class="lyear-layout-container">
        {% block content %}
        <!-- 默认内容可以放在这里 -->
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <h4>欢迎使用医疗药品服务智能推荐系统</h4>
                            <p>请从左侧菜单选择您需要的服务</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endblock %}
    </main>
</div>

<!-- JavaScript 文件 -->
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/perfect-scrollbar.min.js"></script>
<script type="text/javascript" src="/static/js/main.min.js"></script>

<script>
$(document).ready(function() {
    // 侧边栏折叠功能
    $('.lyear-aside-toggler').click(function() {
        $('body').toggleClass('sidebar-open');
    });

    // 导航菜单激活状态
    function setActiveNav() {
        const currentPath = window.location.pathname;
        $('.nav-item a').removeClass('active');
        $(`.nav-item a[href="${currentPath}"]`).addClass('active');
    }
    setActiveNav();

    // 自动滚动功能
    function initAutoScroll() {
        const container = document.querySelector('.chat-container') ||
                         document.querySelector('.lyear-layout-container');
        if (!container) return;

        const scrollToBottom = () => {
            container.scrollTo({
                top: container.scrollHeight,
                behavior: 'smooth'
            });
        };

        scrollToBottom();
        const observer = new MutationObserver(scrollToBottom);
        observer.observe(container, {
            childList: true,
            subtree: true,
            characterData: true
        });
        window.addEventListener('resize', scrollToBottom);
    }
    initAutoScroll();

    // 用户下拉菜单
    $('.dropdown-profile').hover(function() {
        $(this).addClass('open');
    }, function() {
        $(this).removeClass('open');
    });
});

// 显示消息提示
{% if msg %}
$(document).ready(function() {
    alert("{{ msg }}");
});
{% endif %}
</script>
</body>
</html>
